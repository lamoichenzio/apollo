<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org"
	layout:decorate="~{common/layout/frame_public}">

<body>
	<div layout:fragment="page-content">
		<script th:src="@{/script/survey_ajax.js}"></script>

		<div class="col-md-12">
			<div id="modal_holder"></div>
		</div>

		<!-- Page title -->
		<div class="page-title">
			<div class="row justify-content-between align-items-center">
				<div
					class="col-md-6 d-flex align-items-center justify-content-between justify-content-md-start mb-3 mb-md-0">
					<!-- Page title + Go Back button -->
					<div class="d-inline-block">
						<h5 class="h4 d-inline-block font-weight-400 mb-0 text-white">[[${survey.name}]]</h5>
					</div>
				</div>

			</div>
		</div>
		<!-- Listing -->
		<div class="card">
			<!-- Card header -->
			<div class="card-header actions-toolbar">
				<div class="row justify-content-between align-items-center">
					<div class="col">
						<input type="text"
							class="form-control form-control-flush form-control-xl p-0 text-primary"
							placeholder="Enter a name for the survey"  th:value="${survey.description}">
					</div>
					<div class="col text-right">
						<div class="actions">
							<a href="#" class="action-item mr-3" data-action="search-open"
								data-target="#actions-search">
								<i class="far fa-save"></i>
							</a>
							<a href="#" class="action-item mr-3" data-action="search-open"
								data-target="#actions-search">
								<i class="far fa-cog"></i>
							</a>
							<a href="#" class="action-item mr-3" data-action="search-open"
								data-target="#actions-search">
								<i class="far fa-trash text-danger"></i>
							</a>
						</div>
					</div>
				</div>
			</div>
			<div th:if="${param.error != null}" class="row justify-content-between align-items-center">
				<div class="col m-4" th:text="#{apollo.questionerror}">Error</div>
			</div>
			<!-- SURVEY CONTAINER -->
			
			<div th:each="questiongroup : *{survey.questionGroups}">
				
				<div th:replace="~{common/surveys/components/question_group/question_group_container.html :: group(groupInfo=${questiongroup})}"></div>
				
			</div>

			<!-- ADD GROUP BUTTON -->
			<div class="card-body my-4">
				<div class="row justify-content-center">
					<div class="col-auto d-flex align-items-center">

						<button id="create_group" type="button"
							class="btn btn-primary btn-icon rounded-pill"
							th:onclick="openQuestionGroupModal([[@{/questiongroups/create}]],
							'#modal-create-new-group', [[${survey.id}]])">
							<span class="btn-inner--icon">
								<i class="far fa-plus"></i>
							</span>
							<span class="btn-inner--text">New Group</span>
						</button>
					</div>
				</div>
			</div>
		</div>


	</div>


	</div>

</body>

</html>
