<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org"
	layout:decorate="~{common/layout/frame_public}">

<body>
	<div layout:fragment="page-content">
	<script th:src="@{/script/survey_ajax.js}"></script>
	
	<div class="col-12">
		<div id="modal_holder"></div>
	</div>
	
		<!-- Page title -->
		<div class="page-title">
			<div class="row justify-content-between align-items-center">
				<div
					class="col-md-6 d-flex align-items-center justify-content-between justify-content-md-start mb-3 mb-md-0">
					<!-- Page title + Go Back button -->
					<div class="d-inline-block">
						<h5 class="h4 d-inline-block font-weight-400 mb-0 text-white">Projects</h5>
					</div>
					<!-- Additional info -->
					<div class="align-items-center ml-4 d-inline-flex">
						<span class="h4 text-info mb-0 mr-2">9</span> <span class="text-sm opacity-7 text-white">Running
							projects</span>
					</div>
					<!-- Optional link -->
					<a href="card-listing.html" class="text-sm text-info d-none d-lg-inline-block ml-4">See
						cards</a>
				</div>

				<div class="col-md-6 d-flex align-items-center justify-content-between justify-content-md-end">
                	<a id="create_survey" href="#" th:onclick="openSurveyModalRequest([[@{/surveys/create}]], '#modal-create-new-survey', null)"
                   class="btn btn-sm btn-white btn-icon-only rounded-circle ml-4">
						<span class="btn-inner--icon">
							<i class="far fa-plus"></i>
						</span>
               		</a>
            	</div>
            	
			</div>
		</div>
		<!-- Listing -->
		<div class="card">

			<!-- Table -->

			<div class="table-responsive">
				<table class="table" id="survey_table" width="100%" cellspacing="0">
					<thead>
						<tr>
							<th th:text="#{survey.icon}">Icon</th>
							<th th:text="#{survey.name}">Name</th>
							<th th:text="#{survey.status}">Status</th>
							<th th:text="#{survey.creationDate}">Creation Date</th>
							<!-- 							<th th:text="#{survey.completions}">Completions</th> -->
							<th th:text="#{common.action}">Actions</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
		
		<script th:inline="javascript">
			$(document).ready(function () {
				$('#survey_table').DataTable({
					"columns": [{ "data": "icon" },
								{ "data": "name",
									"render": function (data, type, row, meta) {
										return '<a href="[(@{/surveys/detail})]?id=' + row.id + '">'+row.name+'</a>';
									}
								},
								{ "data": "active" },
								{ "data": "creationDate" },
								{ "data": "action",
									"searchable": false,
									"sortable": false,
									"defaultContent": "",
									"render": function (data, type, row, meta) {
									return '<a href="#" data-toggle="tooltip" title="Edit" onclick="openSurveyModalRequest(\'\/apollo\/surveys\/update\', \'#modal-create-new-survey\',\'' + row.id + '\')"><i class="far fa-edit"></i></a>'
									 + ' | ' +
									'<a href="#" data-toggle="tooltip" title="Delete" onclick="getSurveyRequest(\'\/apollo\/surveys\/delete\', \'#modal-delete-survey\', \'' + row.id + '\')"><i class="fas fa-trash"></a>';
									}
								}	
								],
					"ajax": {
						"url": "[(@{/surveys/findallpaginated})]"
					},
				});
			});
		</script>
	</div>
</body>

</html>